(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{26:function(t,e,n){},27:function(t,e,n){},29:function(t){t.exports=JSON.parse("{}")},55:function(t,e,n){"use strict";n.r(e);var c=n(3),a=n.n(c),r=n(21),o=n.n(r),u=(n(26),n.p,n(27),n(1)),s=n.n(u),i=n(4),p=n(5),d=n(6),l=n(9),f=n(8),h=(n(29),n(0));c.Component;var m=n(7),g=(n(31),n(34),n(53),0),b=[],v=function(t){Object(l.a)(n,t);var e=Object(f.a)(n);function n(){var t;return Object(p.a)(this,n),(t=e.call(this)).getFileContext=function(e){var n=e.target.files[0];t.splitStream(n,0,1e5)},t.splitStream=function(){var e=Object(i.a)(s.a.mark((function e(n,c,a){var r,o,u,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(!(a<=n.size)){e.next=11;break}return r=n.slice(c,a),e.next=4,r.text();case 4:o=e.sent,u=t.getIndex(o,"puid",2),t.setState({ResumeFrom:c+u-100}),i=o.split("\n"),t.ReadRow2(n,i),e.next=13;break;case 11:console.log("Finished Processing File"),t.setState({progressInstance:"Finished Processing File"});case 13:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),t.ReadRow2=function(){var e=Object(i.a)(s.a.mark((function e(n,c){var a,r,o,u,i,p;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:for(a="",-1,r=!1,o=0,u=0;u<=c.length-1;u++)c[u].includes("puid")&&(r=!0),r&&(c[u].includes("puid")&&(o+=1),1==o&&(i=c[u].includes("puid")?"{"+c[u]:c[u],a+=i),2==o&&(r=!1,a=a.substring(0,a.length-3)));try{p=JSON.parse(a),t.UpdateProduct(p,n)}catch(s){console.log("Catch :: ".concat(s)),t.Resumify(n)}case 3:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.Resumify=function(e){t.splitStream(e,t.state.ResumeFrom,t.state.ResumeFrom+1e6)},t.UpdateProduct=function(){var e=Object(i.a)(s.a.mark((function e(n,c){return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:b.push(n),10==b.length?(console.log("10 products bundled"),t.setState({Pause:!0}),t.Fetch(b[0]),t.Fetch(b[1]),t.Fetch(b[2]),t.Fetch(b[3]),t.Fetch(b[4]),t.Fetch(b[5]),t.Fetch(b[6]),t.Fetch(b[7]),t.Fetch(b[8]),t.Fetch(b[9]),setInterval((function(){10==t.state.SequenceCount&&(console.log("10 products uploaded"),b=[],t.setState({SequenceCount:0}),t.Resumify(c))}),1e3)):(console.log("Resume: Products "),t.Resumify(c));case 2:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),t.Fetch=function(e){var n=e.manufacturer.name+" "+e.manufacturerSKU,c=t.ParseImages(e),a=Object(m.a)(t),r=0,o=e.manufacturerName+e.productName;1==e.hasOwnProperty("productPriceInfo")&&(r=e.productPriceInfo.price),console.log("Stock :: ".concat(e.aggregatedStock)),fetch("https://firewallforce.se/wp-json/wc/v3/update64?ean=".concat(e.ean,"&name=").concat(n,"&puid=").concat(e.puid,"&sku=").concat(e.manufacturerSKU,"&price=").concat(r,"&catname=").concat(e.productType.name,"&brand=").concat(e.manufacturer.name,"&shortdesc=").concat(e.shortDescription,"&longdesc=").concat(e.longDescription,"&stock=").concat(e.aggregatedStock,"&stockstatus=").concat(e.aggregatedStatusText,"&attrib1=").concat(e.productType.attributeTypeName1,"&attrib2=").concat(e.productType.attributeTypeName2,"&attrib3=").concat(e.productType.attributeTypeName3,"&attrib4=").concat(e.productType.attributeTypeName4,"&attrib5=").concat(e.productType.attributeTypeName5,"&attrib1v=").concat(e.attributeValue1,"&attrib2v=").concat(e.attributeValue2,"&attrib3v=").concat(e.attributeValue3,"&attrib4v=").concat(e.attributeValue4,"&attrib5v=").concat(e.attributeValue5,"&images=").concat(c,"&warrantyText=").concat(e.warrantyText,"&productName=").concat(e.productName,"&productNameWithManufacturer=").concat(o,"&productTypeGroup=").concat(e.productType.productTypeGroup,"&producttypeName=").concat(e.productType.name,"&productsubtype=").concat(e.productSubType,"&productsubtypeid=").concat(e.productSubTypeId,"&estimategrossweight=").concat(e.estimateGrossWeight,"&productType=").concat(e.manufacturerName,"&productModel=").concat(e.productModel,"&htmlspecs=").concat(e.htmlSpecs),{method:"GET",headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526")}}).then((function(e){e.json().then((function(e){return g+=1,console.log("resp :: ".concat(JSON.stringify(e))),console.log("Products :: ".concat(g)),a.setState({progressInstance:g,SequenceCount:t.state.SequenceCount+=1}),e}))})).catch((function(e){console.log(e),console.log("@safe!"),g+=1,a.setState({progressInstance:g,SequenceCount:t.state.SequenceCount+=1})}))},t.ParseImages=function(t){var e=[];return t.hasOwnProperty("mediaContents")&&t.mediaContents.forEach((function(t){if(t.value.includes("img")){var n=t.value.split("/").join("*");n=n.split("&").join("^"),e.push(n)}})),e},t.streamSlice=function(){var e=Object(i.a)(s.a.mark((function e(n,c,a){var r,o,u,i;return s.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return r=n.slice(c,a),e.next=3,r.text();case 3:return o=e.sent,u=t.getProduct(o,c),t.state.Products.push(u),t.setState({Products:t.state.Products,counter:t.state.counter+1}),i=n.slice(t.state.ResumeFrom,3),e.next=10,i.text();case 10:e.sent;case 11:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),t.getProduct=function(e,n){var c=t.getIndex(e,"puid",2);t.setState({ResumeFrom:c});var a=e.substring(n-9,c);console.log(a);var r=a.substring(0,a.length-9),o=JSON.parse(r);return console.log(o),o},t.uploadProduct=function(){var t=Object(i.a)(s.a.mark((function t(e){return s.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.state={ResumeFrom:-1,Products:[],counter:0,progressInstance:0,Pause:!1,SequenceCount:!1},t}return Object(d.a)(n,[{key:"getIndex",value:function(t,e,n){return t.split(e,n).join(e).length}},{key:"render",value:function(){var t=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"file",onChange:function(e){t.getFileContext(e)}}),Object(h.jsxs)("h5",{children:[" ",this.state.progressInstance," "]})]})}}]),n}(c.Component);var y=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(v,{})})},S=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(e){var n=e.getCLS,c=e.getFID,a=e.getFCP,r=e.getLCP,o=e.getTTFB;n(t),c(t),a(t),r(t),o(t)}))};n(54);o.a.render(Object(h.jsx)(a.a.StrictMode,{children:Object(h.jsx)(y,{})}),document.getElementById("root")),S()}},[[55,1,2]]]);
//# sourceMappingURL=main.0f437c1e.chunk.js.map