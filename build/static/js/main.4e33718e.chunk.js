(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{204:function(t,e,n){},205:function(t,e,n){},207:function(t){t.exports=JSON.parse("{}")},248:function(t,e){},250:function(t,e){},261:function(t,e){},263:function(t,e){},316:function(t,e){},318:function(t,e){},346:function(t,e){},347:function(t,e){},352:function(t,e){},354:function(t,e){},361:function(t,e){},380:function(t,e){},425:function(t,e,n){"use strict";n.r(e);var o=n(27),c=n.n(o),s=n(195),a=n.n(s),r=(n(204),n.p,n(205),n(20)),u=n.n(r),i=n(42),l=n(30),f=n(41),d=n(63),p=n(62),h=(n(207),n(12));o.Component;var g=n(43),P=(n(209),n(196)),y=n.n(P),b=(n(426),n(90),n(277),n(279),0);function j(t){console.log(t.data)}var S=function(t){Object(d.a)(n,t);var e=Object(p.a)(n);function n(){var t;return Object(l.a)(this,n),(t=e.call(this)).componentDidMount=function(){},t.initStream=function(){var e="http://localhost:5000/api/stream/".concat(t.state.exportKey);y.a.get(e,{responseType:"stream"}).then(j)},t.onProduct=function(){var e=Object(g.a)(t),n=new WebSocket("ws://localhost:5000/");n.onopen=function(){console.log("WebSocket Client Connected"),n.send("Message From Client"),e.initStream()},n.onmessage=function(t){e.state.AllProducts.push(t.data),e.setState({AllProducts:e.state.AllProducts}),e.ApiFlow()}},t.ApiFlow=function(){if(console.log(t.state.AllProducts.length),t.state.AllProducts.length>5){var e=JSON.parse(t.state.AllProducts[0]),n=JSON.parse(t.state.AllProducts[1]),o=JSON.parse(t.state.AllProducts[2]),c=JSON.parse(t.state.AllProducts[3]),s=JSON.parse(t.state.AllProducts[4]);t.state.AllProducts=t.state.AllProducts.filter((function(e){return e!==t.state.AllProducts[0]})),t.state.AllProducts=t.state.AllProducts.filter((function(e){return e!==t.state.AllProducts[1]})),t.state.AllProducts=t.state.AllProducts.filter((function(e){return e!==t.state.AllProducts[2]})),t.state.AllProducts=t.state.AllProducts.filter((function(e){return e!==t.state.AllProducts[3]})),t.state.AllProducts=t.state.AllProducts.filter((function(e){return e!==t.state.AllProducts[4]})),t.setState({AllProducts:t.state.AllProducts});var a=[e,n,o,c,s];t.Fetch2(a)}},t.Fetch2=function(){var e=Object(i.a)(u.a.mark((function e(n){var o,c,s;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return delete n[0].keyContents,delete n[1].keyContents,delete n[2].keyContents,delete n[3].keyContents,delete n[4].keyContents,t.ParseImages(n),o=Object(g.a)(t),e.next=9,fetch("http://localhost:5000/api/woo",{method:"POST",body:JSON.stringify({info:n}),headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526"),"Content-Type":"application/json"}});case 9:return c=e.sent,e.next=12,c.json();case 12:s=e.sent,console.log(JSON.stringify(s)),b+=5,console.log("Products :: ".concat(b)),o.setState({progressInstance:b,SequenceCount:t.state.SequenceCount+=5}),t.reupdate(s.info);case 18:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),t.Fetch=function(e){console.log("name :: ".concat(e[0].manufacturerSKU)),t.ParseImages(e),console.log("Status :: Sending:Request");var n=Object(g.a)(t);fetch("https://firewallforce.se/wp-json/wc/v3/postify?",{method:"POST",body:JSON.stringify({info:e}),headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526"),"Content-Type":"application/json"}}).then((function(e){e.text().then((function(e){console.log("Text :: ".concat(e));try{var o=JSON.parse(e);return console.log("resp :: ".concat(JSON.stringify(o))),t.reupdate(o),b+=5,console.log("Products :: ".concat(b)),n.setState({progressInstance:b,SequenceCount:t.state.SequenceCount+=5}),o}catch(c){console.log("@jsn safe"),console.log(c),console.log(e),b+=5,n.setState({progressInstance:b,SequenceCount:t.state.SequenceCount+=5})}}))})).catch((function(t){console.log(t),console.log("@gobal safe!")}))},t.reupdate=function(e){try{e[0].hasOwnProperty("category")&&t.updateCategories(e[0].id,e[0].category)}catch(n){console.log(n)}try{e[0].hasOwnProperty("images")&&t.updateImages(e)}catch(n){console.log(n)}},t.updateImages=function(){var t=Object(i.a)(u.a.mark((function t(e){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log(e[0].images);try{fetch("https://firewallforce.se/wp-json/wc/v3/updateimages?",{method:"POST",body:JSON.stringify({info:e}),headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526"),"Content-Type":"application/json"}}).then((function(t){t.text().then((function(t){console.log("Update Image Resp :: ".concat(JSON.stringify(t)))}))}))}catch(n){console.log(n)}case 2:case"end":return t.stop()}}),t)})));return function(e){return t.apply(this,arguments)}}(),t.updateCategories=function(){var t=Object(i.a)(u.a.mark((function t(e,n){return u.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:console.log("id :: ".concat(e," & cat :: ").concat(n)),n.includes("&")&&(n=n.split("&").join("*")),n.includes(" ")&&(n=n.split(" ").join("%20")),console.log(n);try{fetch("https://firewallforce.se/wp-json/wc/v3/upcat?setcategory=".concat(n,"&id=").concat(e)).then((function(t){t.json().then((function(t){console.log("Update Cat Resp :: ".concat(JSON.stringify(t)))}))}))}catch(o){console.log(o)}case 5:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),t.ParseImages=function(t){t.forEach((function(t){var e=[];t.hasOwnProperty("mediaContents")&&(t.mediaContents.forEach((function(t){if(t.value.includes("img")){var n=t.value.split("/").join("*");n=n.split("&").join("^"),e.push(n)}})),t.images=e,e=[])}))},t.CreateProduct=function(){},t.state={ResumeFrom:-1,AllProducts:[],counter:0,progressInstance:0,Pause:!1,SequenceCount:!1,catCount:0,exportKey:""},t}return Object(f.a)(n,[{key:"getIndex",value:function(t,e,n){return t.split(e,n).join(e).length}},{key:"render",value:function(){var t=this;return Object(h.jsxs)("div",{children:[Object(h.jsx)("input",{type:"text",placeholder:"Export Key",value:this.state.exportKey,onChange:function(e){t.setState({exportKey:e.target.value})}}),Object(h.jsx)("button",{onClick:function(){t.onProduct()},children:"Start"}),Object(h.jsx)("h5",{children:this.state.progressInstance})]})}}]),n}(o.Component);var O=function(){return Object(h.jsx)("div",{className:"App",children:Object(h.jsx)(S,{})})},v=function(t){t&&t instanceof Function&&n.e(3).then(n.bind(null,428)).then((function(e){var n=e.getCLS,o=e.getFID,c=e.getFCP,s=e.getLCP,a=e.getTTFB;n(t),o(t),c(t),s(t),a(t)}))};n(424);a.a.render(Object(h.jsx)(c.a.StrictMode,{children:Object(h.jsx)(O,{})}),document.getElementById("root")),v()}},[[425,1,2]]]);
//# sourceMappingURL=main.4e33718e.chunk.js.map