(this.webpackJsonpview=this.webpackJsonpview||[]).push([[0],{26:function(e,t,n){},27:function(e,t,n){},29:function(e){e.exports=JSON.parse("{}")},55:function(e,t,n){"use strict";n.r(t);var o=n(4),c=n.n(o),a=n(21),s=n.n(a),r=(n(26),n.p,n(27),n(0)),i=n.n(r),u=n(3),l=n(5),p=n(6),g=n(9),d=n(8),f=(n(29),n(1));o.Component;var h=n(7),y=(n(31),n(34),n(53),0),m=[];var v=function(e){Object(g.a)(n,e);var t=Object(d.a)(n);function n(){var e;return Object(l.a)(this,n),(e=t.call(this)).componentDidMount=function(){},e.getFileContext=function(t){var n=t.target.files[0];e.splitStream(n,0,1e5)},e.splitStream=function(){var t=Object(u.a)(i.a.mark((function t(n,o,c){var a,s,r,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:if(!(c<=n.size)){t.next=11;break}return a=n.slice(o,c),t.next=4,a.text();case 4:s=t.sent,r=e.getIndex(s,"puid",2),e.setState({ResumeFrom:o+r-100}),u=s.split("\n"),e.ReadRow2(n,u),t.next=13;break;case 11:console.log("Finished Processing File"),e.setState({progressInstance:"Finished Processing File"});case 13:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}(),e.ReadRow2=function(){var t=Object(u.a)(i.a.mark((function t(n,o){var c,a,s,r,u,l;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:for(c="",-1,a=!1,s=0,r=0;r<=o.length-1;r++)o[r].includes("puid")&&(a=!0),a&&(o[r].includes("puid")&&(s+=1),1==s&&(u=o[r].includes("puid")?"{"+o[r]:o[r],c+=u),2==s&&(a=!1,c=c.substring(0,c.length-3)));try{l=JSON.parse(c),e.UpdateProduct(l,n)}catch(i){console.log("Catch :: ".concat(i)),e.Resumify(n)}case 3:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.Resumify=function(t){e.splitStream(t,e.state.ResumeFrom,e.state.ResumeFrom+1e6)},e.UpdateProduct=function(){var t=Object(u.a)(i.a.mark((function t(n,o){return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:m.push(n),5==m.length?(console.log("5 products bundled"),e.Fetch(m),setInterval((function(){5==e.state.SequenceCount&&(console.log("5 products uploaded"),m=[],e.setState({SequenceCount:0}),e.Resumify(o))}),1e3)):(console.log("Resume: Products "),e.Resumify(o));case 2:case"end":return t.stop()}}),t)})));return function(e,n){return t.apply(this,arguments)}}(),e.Fetch=function(t){console.log("name :: ".concat(t[0].manufacturerSKU)),e.ParseImages(t),console.log("Status :: Sending:Request");var n=Object(h.a)(e);fetch("https://firewallforce.se/wp-json/wc/v3/postify?",{method:"POST",body:JSON.stringify({info:t}),headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526"),"Content-Type":"application/json"}}).then((function(t){t.text().then((function(t){console.log("Text :: ".concat(t));try{var o=JSON.parse(t);return console.log("resp :: ".concat(JSON.stringify(o))),e.reupdate(o),y+=5,console.log("Products :: ".concat(y)),n.setState({progressInstance:y,SequenceCount:e.state.SequenceCount+=5}),o}catch(c){console.log("@jsn safe"),console.log(c),console.log(t),y+=5,n.setState({progressInstance:y,SequenceCount:e.state.SequenceCount+=5})}}))})).catch((function(e){console.log(e),console.log("@gobal safe!")}))},e.reupdate=function(t){try{t[0].hasOwnProperty("category")&&e.updateCategories(t[0].id,t[0].category)}catch(n){console.log(n)}try{t[1].hasOwnProperty("category")&&e.updateCategories(t[1].id,t[1].category)}catch(n){console.log(n)}try{t[2].hasOwnProperty("category")&&e.updateCategories(t[2].id,t[2].category)}catch(n){console.log(n)}try{t[3].hasOwnProperty("category")&&e.updateCategories(t[3].id,t[3].category)}catch(n){console.log(n)}try{t[4].hasOwnProperty("category")&&e.updateCategories(t[4].id,t[4].category)}catch(n){console.log(n)}try{t[0].hasOwnProperty("images")&&e.updateImages(t[0])}catch(n){console.log(n)}try{t[1].hasOwnProperty("images")&&e.updateImages(t[1])}catch(n){console.log(n)}try{t[2].hasOwnProperty("images")&&e.updateImages(t[2])}catch(n){console.log(n)}try{t[3].hasOwnProperty("images")&&e.updateImages(t[3])}catch(n){console.log(n)}try{t[4].hasOwnProperty("images")&&e.updateImages(t[4])}catch(n){console.log(n)}},e.updateImages=function(){var e=Object(u.a)(i.a.mark((function e(t){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:try{fetch("https://firewallforce.se/wp-json/wc/v3/updateimages?",{method:"POST",body:JSON.stringify({info:t}),headers:{Authorization:"Basic"+btoa("ck_42a75ce7a233bc1e341e33779723c304e6d820cc:cs_6e5a683ab5f08b62aa1894d8d2ddc4ad69ff0526"),"Content-Type":"application/json"}}).then((function(e){e.json().then((function(e){console.log("Update Image Resp :: ".concat(JSON.stringify(e)))}))}))}catch(n){console.log(n)}case 1:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),e.updateCategories=function(){var e=Object(u.a)(i.a.mark((function e(t,n){return i.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:console.log("id :: ".concat(t," & cat :: ").concat(n)),n.includes("&")&&(n=n.split("&").join("*")),n.includes(" ")&&(n=n.split(" ").join("%20")),console.log(n);try{fetch("https://firewallforce.se/wp-json/wc/v3/upcat?setcategory=".concat(n,"&id=").concat(t)).then((function(e){e.json().then((function(e){console.log("Update Cat Resp :: ".concat(JSON.stringify(e)))}))}))}catch(o){console.log(o)}case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),e.ParseImages=function(e){e.forEach((function(e){var t=[];e.hasOwnProperty("mediaContents")&&(e.mediaContents.forEach((function(e){if(e.value.includes("img")){var n=e.value.split("/").join("*");n=n.split("&").join("^"),t.push(n)}})),e.images=t,t=[])}))},e.streamSlice=function(){var t=Object(u.a)(i.a.mark((function t(n,o,c){var a,s,r,u;return i.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return a=n.slice(o,c),t.next=3,a.text();case 3:return s=t.sent,r=e.getProduct(s,o),e.state.Products.push(r),e.setState({Products:e.state.Products,counter:e.state.counter+1}),u=n.slice(e.state.ResumeFrom,3),t.next=10,u.text();case 10:t.sent;case 11:case"end":return t.stop()}}),t)})));return function(e,n,o){return t.apply(this,arguments)}}(),e.getProduct=function(t,n){var o=e.getIndex(t,"puid",2);e.setState({ResumeFrom:o});var c=t.substring(n-9,o);console.log(c);var a=c.substring(0,c.length-9),s=JSON.parse(a);return console.log(s),s},e.nodechecker=function(){},e.state={ResumeFrom:-1,Products:[],counter:0,progressInstance:0,Pause:!1,SequenceCount:!1,catCount:0},e}return Object(p.a)(n,[{key:"getIndex",value:function(e,t,n){return e.split(t,n).join(t).length}},{key:"render",value:function(){var e=this;return Object(f.jsxs)("div",{children:[Object(f.jsx)("input",{type:"file",onChange:function(t){e.getFileContext(t)}}),Object(f.jsxs)("h5",{children:[" ",this.state.progressInstance," "]})]})}}]),n}(o.Component);var O=function(){return Object(f.jsx)("div",{className:"App",children:Object(f.jsx)(v,{})})},b=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,57)).then((function(t){var n=t.getCLS,o=t.getFID,c=t.getFCP,a=t.getLCP,s=t.getTTFB;n(e),o(e),c(e),a(e),s(e)}))};n(54);s.a.render(Object(f.jsx)(c.a.StrictMode,{children:Object(f.jsx)(O,{})}),document.getElementById("root")),b()}},[[55,1,2]]]);
//# sourceMappingURL=main.a3ed4483.chunk.js.map